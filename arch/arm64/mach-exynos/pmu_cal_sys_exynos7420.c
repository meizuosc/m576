/*
 * Copyright (c) 2014 Samsung Electronics Co., Ltd. All rights reserved.
 *		http://www.samsung.com
 *
 * Chip Abstraction Layer for System power down support
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#ifdef CONFIG_CAL_SYS_PWRDOWN
/* for OS */
#include <mach/pmu_cal_sys.h>
#else
/* for firmware */
#include "util.h"
#include "pmu_cal_sys_exynos7420.h"
struct exynos_pmu_conf {
	unsigned long reg;
	unsigned int val[NUM_SYS_POWERDOWN];
};
#endif

#define	writebits(addr, base, mask, val) \
	__raw_writel((__raw_readl(addr) & ~((mask) << (base))) | \
		(((mask) & (val)) << (base)), addr)

#define readbits(addr, base, mask) \
	((__raw_readl(addr) >> (base)) & (mask))

static struct exynos_pmu_conf exynos7420_pmu_config[] = {
	/* { .addr = address, .val = { AFTR, STOP, DSTOP, DSTOP_PSR, LPD, LPA, ALPA, SLEEP } } */
	{ ATLAS_CPU0_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_ATLAS_CPU0_LOCAL_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU0_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU0_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ATLAS_CPU1_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_ATLAS_CPU1_LOCAL_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU1_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU1_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ATLAS_CPU2_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_ATLAS_CPU2_LOCAL_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU2_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU2_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ATLAS_CPU3_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_ATLAS_CPU3_LOCAL_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU3_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_ATLAS_CPU3_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ APOLLO_CPU0_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_APOLLO_CPU0_LOCAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU0_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU0_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ APOLLO_CPU1_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_APOLLO_CPU1_LOCAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU1_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU1_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ APOLLO_CPU2_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_APOLLO_CPU2_LOCAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU2_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU2_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ APOLLO_CPU3_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ DIS_IRQ_APOLLO_CPU3_LOCAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU3_CENTRAL_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_APOLLO_CPU3_CPUSEQUENCER_SYS_PWR_REG,	{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ATLAS_NONCPU_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ APOLLO_NONCPU_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8 } },
	{ ATLAS_DBG_SYS_PWR_REG,			{ 0x0, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2 } },
	{ CORTEXM3_APM_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ A7IS_SYS_PWR_REG,				{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_A7IS_LOCAL_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DIS_IRQ_A7IS_CENTRAL_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ATLAS_L2_SYS_PWR_REG,				{ 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7 } },
	{ APOLLO_L2_SYS_PWR_REG,			{ 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7 } },
	{ CLKSTOP_CMU_TOP_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_TOP_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_TOP_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CPUCLKSTOP_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_MIF_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_MIF_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_MIF_SYS_PWR_REG,			{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ DDRPHY_DLLLOCK_SYS_PWR_REG,			{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1 } },
	{ DISABLE_PLL_CMU_TOP_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_MIF_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ TOP_BUS_SYS_PWR_REG,				{ 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ TOP_RETENTION_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1 } },
	{ TOP_PWR_SYS_PWR_REG,				{ 0x3, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3 } },
	{ TOP_BUS_MIF_SYS_PWR_REG,			{ 0x7, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0 } },
	{ TOP_RETENTION_MIF_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x1, 0x0, 0x0, 0x1 } },
	{ TOP_PWR_MIF_SYS_PWR_REG,			{ 0x3, 0x3, 0x0, 0x0, 0x3, 0x0, 0x0, 0x3 } },
	{ RET_OSCCLK_GATE_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1 } },
	{ LOGIC_RESET_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ OSCCLK_GATE_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1 } },
	{ SLEEP_RESET_SYS_PWR_REG,			{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ LOGIC_RESET_MIF_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ OSCCLK_GATE_MIF_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x1 } },
	{ SLEEP_RESET_MIF_SYS_PWR_REG,			{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ RET_OSCCLK_GATE_MIF_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1 } },
	{ MEMORY_TOP_SYS_PWR_REG,			{ 0x3, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_TOP_ALV_SYS_PWR_REG,			{ 0x3, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_LPDDR4_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_AUD_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0 } },
	{ PAD_RETENTION_JTAG_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_BUS0_TOP_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_MMC2_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_TOP_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_UART_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_MMC0_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_MMC1_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_EBIA_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_EBIB_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_SPI_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_MIF_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ PAD_ISOLATION_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_LLI_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_UFS_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_ISOLATION_MIF_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_FSYSGENIO_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_BOOTLDO_0_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_RETENTION_BOOTLDO_1_SYS_PWR_REG,		{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ PAD_ALV_SEL_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ XXTI_SYS_PWR_REG,				{ 0x1, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ XXTI26_SYS_PWR_REG,				{ 0x1, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ EXT_REGULATOR_SYS_PWR_REG,			{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ GPIO_MODE_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ GPIO_MODE_FSYS0_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ GPIO_MODE_FSYS1_SYS_PWR_REG,			{ 0x1, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ GPIO_MODE_BUS0_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ GPIO_MODE_MIF_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0 } },
	{ GPIO_MODE_AUD_SYS_PWR_REG,			{ 0x1, 0x1, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0 } },
	{ ATLAS_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ APOLLO_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_ATLAS_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_APOLLO_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_ATLAS_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_APOLLO_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_ATLAS_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_APOLLO_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_ATLAS_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_APOLLO_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_ATLAS_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_ATLAS_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_APOLLO_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_SLEEP_ATLAS_SYS_PWR_REG,		{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ RESET_SLEEP_APOLLO_SYS_PWR_REG,		{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ AUD_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0xF, 0xF, 0x0 } },
	{ BUS0_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0xF, 0x0, 0x0, 0x0 } },
	{ CAM0_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CAM1_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISP_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0xF, 0xF, 0x0, 0x0, 0x0 } },
	{ FSYS0_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ FSYS1_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ G3D_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ISP0_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ ISP1_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MFC_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MSCL_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ VPP_SYS_PWR_REG,				{ 0xF, 0xF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_AUD_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_BUS0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_CAM0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_CAM1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_DISP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_FSYS0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_FSYS1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_G3D_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_ISP0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_ISP1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_MFC_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_MSCL_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKRUN_CMU_VPP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_AUD_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_BUS0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_CAM0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_CAM1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_DISP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_FSYS0_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_FSYS1_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_G3D_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_ISP0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_ISP1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_MFC_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_MSCL_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ CLKSTOP_CMU_VPP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_AUD_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_BUS0_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_CAM0_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_CAM1_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_DISP_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_FSYS0_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_FSYS1_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_G3D_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_ISP0_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_ISP1_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_MFC_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_MSCL_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ DISABLE_PLL_CMU_VPP_SYS_PWR_REG,		{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_AUD_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_BUS0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_CAM0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_CAM1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_DISP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_FSYS0_SYS_PWR_REG,		{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_FSYS1_SYS_PWR_REG,		{ 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ RESET_LOGIC_G3D_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_ISP0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_ISP1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_MFC_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_MSCL_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_LOGIC_VPP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_AUD_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_CAM0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_CAM1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_DISP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_FSYS0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_FSYS1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_G3D_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_ISP0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_ISP1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_MFC_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_MSCL_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ MEMORY_VPP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_AUD_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_BUS0_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_CAM0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_CAM1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_DISP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_FSYS0_SYS_PWR_REG,			{ 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_FSYS1_SYS_PWR_REG,			{ 0x1, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ RESET_CMU_G3D_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_ISP0_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_ISP1_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_MFC_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_MSCL_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_CMU_VPP_SYS_PWR_REG,			{ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 } },
	{ RESET_SLEEP_BUS0_SYS_PWR_REG,			{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ RESET_SLEEP_FSYS0_SYS_PWR_REG,		{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ RESET_SLEEP_FSYS1_SYS_PWR_REG,		{ 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0 } },
	{ NULL, },
};

static struct exynos_pmu_conf exynos7420_pmu_option[] = {
        /* { .addr = address, .val = { AFTR, STOP, DSTOP, DSTOP_PSR, LPD, LPA, ALPA, SLEEP } } */
	{ PMU_SYNC_CTRL,		 {        0x0,        0x0,        0x0,        0x0,        0x0,        0x0,        0x1,        0x0 } },
	{ CENTRAL_SEQ_MIF_OPTION,	 {     0x1000,     0x1000,     0x1000,     0x1000,     0x1000,     0x1000,     0x1020,     0x1000 } },
	{ WAKEUP_MASK_MIF,		 {   0x100013,   0x100013,   0x100013,   0x100013,   0x100013,   0x100013,   0x100003,   0x100013 } },
	{ ATLAS_NONCPU_OPTION,		 {        0x1,        0x1,        0x1,        0x1,        0x1,        0x1,        0x1,        0x1 } },
	{ MEMORY_TOP_OPTION,		 {       0x11,       0x11,       0x11,       0x11,       0x11,       0x11,       0x11,        0x1 } },
	{ MEMORY_TOP_ALV_OPTION,	 {       0x11,       0x11,       0x11,       0x11,       0x11,       0x11,       0x11,       0x11 } },
	{ RESET_CMU_TOP_OPTION,		 {        0x0, 0x80000000, 0x80000000, 0x80000000, 0x80000000, 0x80000000, 0x80000000,        0x0 } },
	{ ATLAS_OPTION,			 {      0x101,      0x101,      0x101,      0x101,      0x101,      0x101,      0x101, 0xC0001102 } },
	{ APOLLO_OPTION,		 {      0x101,      0x101,      0x101,      0x101,      0x101,      0x101,      0x101, 0xC0001102 } },
	{ FSYS0_OPTION,			 {      0x101,      0x101,      0x101,      0x101,      0x101,      0x101,      0x101, 0xC0001102 } },
	{ FSYS1_OPTION,			 {      0x101,      0x101, 0xE0000102, 0xE0000102, 0xE0000102, 0xE0000102, 0xE0000102, 0xC0001102 } },
	{ PAD_RETENTION_BUS0_TOP_OPTION, { 0x20000000, 0x20000000, 0x20000000, 0x20000000, 0x20000000, 0x00000000, 0x00000000, 0x00000000 } },
	{ TOP_PWR_OPTION, 		 {        0x2,        0x2,        0x2,        0x2,        0x2, 0x08080002, 0x08080002,        0x2 } },
	{ NULL, },
};

static void set_pmu_sys_pwr_reg(enum sys_powerdown mode)
{
	int i;

	for (i = 0; exynos7420_pmu_config[i].reg != NULL; i++)
		__raw_writel(exynos7420_pmu_config[i].val[mode],
				exynos7420_pmu_config[i].reg);

	for (i = 0; exynos7420_pmu_option[i].reg != NULL; i++)
		__raw_writel(exynos7420_pmu_option[i].val[mode],
				exynos7420_pmu_option[i].reg);
}

/* change sequence of cetnral sequencer for CKE */
static void change_central_seq(void)
{
	__raw_writel(0x0D0C0B09, SW_MTUP02);
	__raw_writel(0x11100F0E, SW_MTUP03);
	__raw_writel(0x15141312, SW_MTUP04);
	__raw_writel(0x19181716, SW_MTUP05);
	__raw_writel(0x1D1C1B1A, SW_MTUP06);
	__raw_writel(0x21201F1E, SW_MTUP07);
	__raw_writel(0x25242322, SW_MTUP08);
	__raw_writel(0x29282726, SW_MTUP09);
	__raw_writel(0x2D2C2B2A, SW_MTUP0A);
	__raw_writel(0x31302F2E, SW_MTUP0B);
	__raw_writel(0x35343332, SW_MTUP0C);
	__raw_writel(0x39383736, SW_MTUP0D);
	__raw_writel(0x3C3B0A3A, SW_MTUP0F);

	__raw_writel(0x0D0C0B09, SW_MTUP_MIF02);
	__raw_writel(0x11100F0E, SW_MTUP_MIF03);
	__raw_writel(0x15141312, SW_MTUP_MIF04);
	__raw_writel(0x19181716, SW_MTUP_MIF05);
	__raw_writel(0x1D1C1B1A, SW_MTUP_MIF06);
	__raw_writel(0x21201F1E, SW_MTUP_MIF07);
	__raw_writel(0x25242322, SW_MTUP_MIF08);
	__raw_writel(0x29282726, SW_MTUP_MIF09);
	__raw_writel(0x2D2C2B2A, SW_MTUP_MIF0A);
	__raw_writel(0x31302F2E, SW_MTUP_MIF0B);
	__raw_writel(0x35343332, SW_MTUP_MIF0C);
	__raw_writel(0x39383736, SW_MTUP_MIF0D);
	__raw_writel(0x3C3B0A3A, SW_MTUP_MIF0F);
}

static void restore_central_seq(void)
{
	__raw_writel(0x0C0B0A09, SW_MTUP02);
	__raw_writel(0x100F0E0D, SW_MTUP03);
	__raw_writel(0x14131211, SW_MTUP04);
	__raw_writel(0x18171615, SW_MTUP05);
	__raw_writel(0x1C1B1A19, SW_MTUP06);
	__raw_writel(0x201F1E1D, SW_MTUP07);
	__raw_writel(0x24232221, SW_MTUP08);
	__raw_writel(0x28272625, SW_MTUP09);
	__raw_writel(0x2C2B2A29, SW_MTUP0A);
	__raw_writel(0x302F2E2D, SW_MTUP0B);
	__raw_writel(0x34333231, SW_MTUP0C);
	__raw_writel(0x38373635, SW_MTUP0D);
	__raw_writel(0x3C3B3A39, SW_MTUP0F);

	__raw_writel(0x0C0B0A09, SW_MTUP_MIF02);
	__raw_writel(0x100F0E0D, SW_MTUP_MIF03);
	__raw_writel(0x14131211, SW_MTUP_MIF04);
	__raw_writel(0x18171615, SW_MTUP_MIF05);
	__raw_writel(0x1C1B1A19, SW_MTUP_MIF06);
	__raw_writel(0x201F1E1D, SW_MTUP_MIF07);
	__raw_writel(0x24232221, SW_MTUP_MIF08);
	__raw_writel(0x28272625, SW_MTUP_MIF09);
	__raw_writel(0x2C2B2A29, SW_MTUP_MIF0A);
	__raw_writel(0x302F2E2D, SW_MTUP_MIF0B);
	__raw_writel(0x34333231, SW_MTUP_MIF0C);
	__raw_writel(0x38373635, SW_MTUP_MIF0D);
	__raw_writel(0x3C3B3A39, SW_MTUP_MIF0F);
}

static void set_pmu_central_seq(bool enable)
{
	unsigned int tmp;

#define	CENTRALSEQ_PWR_CFG	0x10000
	/* central sequencer */
	tmp = __raw_readl(CENTRAL_SEQ_CONFIGURATION);
	if (enable)
		tmp &= ~CENTRALSEQ_PWR_CFG;
	else
		tmp |= CENTRALSEQ_PWR_CFG;
	__raw_writel(tmp, CENTRAL_SEQ_CONFIGURATION);

	/* central sequencer MIF */
	tmp = __raw_readl(CENTRAL_SEQ_MIF_CONFIGURATION);
	if (enable)
		tmp &= ~CENTRALSEQ_PWR_CFG;
	else
		tmp |= CENTRALSEQ_PWR_CFG;
	__raw_writel(tmp, CENTRAL_SEQ_MIF_CONFIGURATION);
}

static void set_pmu_pad_retention_release(void)
{
#define PAD_INITIATE_WAKEUP	(0x1 << 28)
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_BUS0_TOP_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_TOP_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_UART_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_MMC0_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_MMC1_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_MMC2_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_EBIA_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_EBIB_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_SPI_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_MIF_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_LLI_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_FSYSGENIO_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_UFS_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_BOOTLDO_0_OPTION);
	__raw_writel(PAD_INITIATE_WAKEUP, PAD_RETENTION_BOOTLDO_1_OPTION);
}

static void set_pmu_lpi_mask(void)
{
	unsigned int tmp;

#define ASATBZ_MSTIF_ATLAS_AUD		(0x1 << 5)
#define ASATBZ_MSTIF_ATLAS_CAM1		(0x1 << 4)
	tmp = __raw_readl(LPI_MASK_ATLAS_ASYNCBRIDGE);
	tmp |= (ASATBZ_MSTIF_ATLAS_AUD | ASATBZ_MSTIF_ATLAS_CAM1);
	__raw_writel(tmp, LPI_MASK_ATLAS_ASYNCBRIDGE);
}

static void init_pmu_l2_option(void)
{
	int cluster;
	unsigned int tmp;

#define L2_OPTION(_nr)			(ATLAS_L2_OPTION + (_nr) * 0x20)
#define USE_AUTOMATIC_L2FLUSHREQ	(0x1 << 17)
#define USE_STANDBYWFIL2		(0x1 << 16)
#define USE_RETENTION			(0x1 << 4)
	/* disable automatic L2 flush */
	/* disable L2 retention */
	/* eanble STANDBYWFIL2 ATLAS only */
	for (cluster = 0; cluster < 2; cluster++) {
		tmp = __raw_readl(L2_OPTION(cluster));
		tmp &= ~(USE_AUTOMATIC_L2FLUSHREQ | USE_RETENTION);
		tmp |= USE_STANDBYWFIL2;
		__raw_writel(tmp, L2_OPTION(cluster));
	}
}

static void init_pmu_cpu_option(void)
{
	int cpu;
	unsigned int tmp;

#define CPU_OPTION(_nr)		(ATLAS_CPU0_OPTION + (_nr) * 0x80)
#define USE_SMPEN		(0x1 << 28)
#define USE_STANDBYWFE		(0x1 << 24)
#define USE_STANDBYWFI		(0x1 << 16)
#define USE_SC_FEEDBACK		(0x1 << 1)
#define USE_SC_COUNTER		(0x1 << 0)
#define USE_MEMPWRDOWN		(0x1 << 2)
	/* use both sc_counter and sc_feedback */
	/* enable to wait for low SMP-bit at sys power down */
	for (cpu = 0; cpu < 8; cpu++) {
		tmp = __raw_readl(CPU_OPTION(cpu));
		if (cpu < 4)
			tmp |= USE_MEMPWRDOWN;
		tmp |= (USE_SC_FEEDBACK | USE_SC_COUNTER);
		tmp |= USE_SMPEN;
		tmp |= USE_STANDBYWFI;
		tmp &= ~USE_STANDBYWFE;
		__raw_writel(tmp, CPU_OPTION(cpu));
	}

#define CPU_DURATION(_nr)	(ATLAS_CPU0_DURATION0 + (_nr) * 0x80)
#define DUR_WAIT_RESET		(0xF << 20)
#define DUR_SCALL		(0xF << 4)
#define DUR_SCALL_VALUE		(0x1 << 4)
	for (cpu = 0; cpu < 8; cpu++) {
		tmp = __raw_readl(CPU_DURATION(cpu));
		tmp |= DUR_WAIT_RESET;
		tmp &= ~DUR_SCALL;
		tmp |= DUR_SCALL_VALUE;
		__raw_writel(tmp, CPU_DURATION(cpu));
	}
}

static void init_pmu_cpuseq_option(void)
{
	unsigned int tmp;

#define SKIP_BLK_PWR_DOWN	(0x1 << 8)
	/* skip block power down for ATLAS during automatic power down */
	tmp = __raw_readl(ATLAS_CPUSEQUENCER_OPTION);
	tmp |= SKIP_BLK_PWR_DOWN;
	__raw_writel(tmp, ATLAS_CPUSEQUENCER_OPTION);
}

static void init_pmu_up_scheduler(void)
{
	unsigned int tmp;

#define ENABLE_ATLAS_CPU	(0x1 << 0)
#define ENABLE_APOLLO_CPU	(0x1 << 1)
	/* limit in-rush current for ATLAS & APOLLO local power up */
	tmp = __raw_readl(UP_SCHEDULER);
	tmp |= ENABLE_ATLAS_CPU | ENABLE_APOLLO_CPU;
	__raw_writel(tmp, UP_SCHEDULER);
}

static void __iomem *feed_list[] = {
	ATLAS_NONCPU_OPTION,
	APOLLO_NONCPU_OPTION,
	TOP_PWR_OPTION,
	TOP_PWR_MIF_OPTION,
	AUD_OPTION,
	CAM0_OPTION,
	DISP_OPTION,
	G3D_OPTION,
	MSCL_OPTION,
	MFC_OPTION,
	BUS0_OPTION,
	FSYS0_OPTION,
	FSYS1_OPTION,
	ISP0_OPTION,
	ISP1_OPTION,
	VPP_OPTION,
};

static void init_pmu_feedback(void)
{
	int i;
	unsigned int tmp;

#define ARR_SIZE(arr)		(sizeof(arr) / sizeof((arr)[0]))
	for (i = 0; i < ARR_SIZE(feed_list); i++) {
		tmp = __raw_readl(feed_list[i]);
		tmp &= ~USE_SC_COUNTER;
		tmp |= USE_SC_FEEDBACK;
		__raw_writel(tmp, feed_list[i]);
	}
}

static void set_duration(void)
{
	unsigned int tmp;

#define DUR_STABLE_MASK		0xFFFFF
#define XXTI_DUR_STABLE		0x1D4C		// 5ms
#define EXTREG_DUR_STABLE	0x3FFF		// 10ms
	tmp = __raw_readl(XXTI_DURATION3);
	tmp &= ~DUR_STABLE_MASK;
	tmp |= XXTI_DUR_STABLE;
	__raw_writel(tmp,XXTI_DURATION3);

	tmp = __raw_readl(EXT_REGULATOR_DURATION3);
	tmp &= ~DUR_STABLE_MASK;
	tmp |= EXTREG_DUR_STABLE;
	__raw_writel(tmp,EXT_REGULATOR_DURATION3);
}

/*
 * CAL 1.0 API
 * function: pmu_cal_sys_init
 * description: default settings at boot time
 */
void pmu_cal_sys_init(void)
{
	init_pmu_feedback();
	init_pmu_l2_option();
	init_pmu_cpu_option();
	init_pmu_cpuseq_option();
	init_pmu_up_scheduler();
	set_pmu_lpi_mask();
	set_duration();
}

/*
 * CAL 1.0 API
 * function: pmu_cal_sys_prepare
 * description: settings before going to system power down
 */
void pmu_cal_sys_prepare(enum sys_powerdown mode)
{
	set_pmu_sys_pwr_reg(mode);
	set_pmu_central_seq(true);

	switch (mode) {
	case SYS_SLEEP:
		set_pmu_lpi_mask();
		change_central_seq();
		break;
	default:
		break;
	}
}

/*
 * CAL 1.0 API
 * function: pmu_cal_sys_post
 * description: settings after normal wakeup
 */
void pmu_cal_sys_post(enum sys_powerdown mode)
{
	set_pmu_pad_retention_release();

	switch (mode) {
	case SYS_SLEEP:
		/* restore lpi mask after sleep */
		set_pmu_lpi_mask();
		restore_central_seq();
		break;
	default:
		break;
	}
}

/*
 * CAL 1.0 API
 * function: pmu_cal_sys_post
 * description: settings after early wakeup
 */
void pmu_cal_sys_earlywake(enum sys_powerdown mode)
{
	set_pmu_central_seq(false);

	switch (mode) {
	case SYS_SLEEP:
		restore_central_seq();
		break;
	default:
		break;
	}
}

#ifdef CONFIG_CAL_SYS_PWRDOWN
static const struct pmu_cal_sys_ops sys_ops = {
	.sys_init	= pmu_cal_sys_init,
	.sys_prepare	= pmu_cal_sys_prepare,
	.sys_post	= pmu_cal_sys_post,
	.sys_earlywake	= pmu_cal_sys_earlywake,
};

void register_pmu_cal_sys_ops(const struct pmu_cal_sys_ops **cal)
{
	*cal = &sys_ops;
}
#endif
